(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){},42:function(e,t,a){e.exports=a(90)},90:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(25),l=a.n(r),o=a(2),s=a(12),m=a(8),i=a(3),u=a(1),d="http://localhost:8000/api",p=function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(d,"/signout"),{method:"GET"}).then(function(e){console.log("signout",e)}).catch(function(e){return console.log(e)})},E=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},f=function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(Object(i.a)({},e,{count:1})),a=Array.from(new Set(a.map(function(e){return e._id}))).map(function(e){return a.find(function(t){return t._id===e})}),localStorage.setItem("cart",JSON.stringify(a)),t())},b=function(e,t){var a=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.map(function(n,c){n._id===e&&(a[c].count=t)}),localStorage.setItem("cart",JSON.stringify(a)))},h=function(e){var t=[];return void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map(function(a,n){a._id===e&&t.splice(n,1)}),localStorage.setItem("cart",JSON.stringify(t))),t},v=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],r=t[1],l=function(){window.location.assign("/search/?search=".concat(a))};return c.a.createElement("div",{className:"container-search"},c.a.createElement("form",{className:"search"},c.a.createElement("span",{className:"input-group-search"},c.a.createElement("div",{className:"input-group input-group-md"},c.a.createElement("input",{type:"text",className:"form-control py-2 border rounded-0",value:a,onChange:function(e){r(e.target.value)},placeholder:""}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-outline-secondary border-left-0 border text-uppercase",onClick:function(e){e.preventDefault(),l()},type:"submit"},c.a.createElement("i",{className:"fas fa-search"})))))))},g=function(e,t){return e.location.pathname===t?{color:"#ffffff"}:{color:"#000000"}},N=Object(s.g)(function(e){var t=e.history;return c.a.createElement("nav",{className:"navbar navbar-expand-md align-items-lg-start fixed-top"},c.a.createElement("div",{className:"navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2"},c.a.createElement("ul",{className:"nav nav-tabs border-bottom-0"},c.a.createElement("ul",{className:"navbar-nav mr-auto nav nav-tabs border-bottom-0"},c.a.createElement("li",{className:"nav-item text-uppercase font-weight-bold"},c.a.createElement(v,null))))),c.a.createElement("div",{className:"mx-auto order-0"},c.a.createElement("ul",{className:"navbar-nav ml-auto"},c.a.createElement("div",{className:"menu-header text-uppercase"},c.a.createElement("li",{className:"nav-item-main text-uppercase"},c.a.createElement(o.b,{className:"nav-link",style:g(t,"/"),to:"/"},"home"))))),c.a.createElement("div",{className:"navbar-collapse collapse w-100 order-3 dual-collapse2"},c.a.createElement("ul",{className:"navbar-nav ml-auto"},c.a.createElement("li",{className:"nav-item text-uppercase font-weight-bold"},c.a.createElement(o.b,{className:"nav-link",style:g(t,"/shop"),to:"/shop"},"shop")),E()&&0===E().user.role&&c.a.createElement("li",{className:"nav-item text-uppercase font-weight-bold"},c.a.createElement(o.b,{className:"nav-link",style:g(t,"/user/dashboard"),to:"/user/dashboard"},"hi, ",E().user.name)),E()&&1===E().user.role&&c.a.createElement("li",{className:"nav-item text-uppercase font-weight-bold"},c.a.createElement(o.b,{className:"nav-link",style:g(t,"/admin/dashboard"),to:"/admin/dashboard"},"hi, ",E().user.name)),!E()&&c.a.createElement(n.Fragment,null,c.a.createElement("li",{className:"nav-item text-uppercase font-weight-bold"},c.a.createElement(o.b,{className:"nav-link",style:g(t,"/signin"),to:"/signin"},"sign in")),c.a.createElement("li",{className:"nav-item text-uppercase font-weight-bold"},c.a.createElement(o.b,{className:"nav-link",style:g(t,"/signup"),to:"/signup"},"sign up"))),E()&&c.a.createElement("li",{className:"nav-item text-uppercase font-weight-bold"},c.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#b4c6ca"},onClick:function(){return p(function(){t.push("/")})}},"sign out")),c.a.createElement("li",{className:"nav-item text-uppercase font-weight-bold"},c.a.createElement(o.b,{className:"nav-link",style:g(t,"/"),to:"/user/favorites"},c.a.createElement("i",{style:{fontSize:"12px"},className:"fas fa-heart"}))),c.a.createElement("li",{className:"nav-item text-uppercase font-weight-bold"},c.a.createElement(o.b,{className:"nav-link",style:g(t,"/cart"),to:"/cart"},"cart"," ","undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0)))))}),y=(a(30),function(e){var t=e.className,a=e.children;return c.a.createElement("div",{className:"template"},c.a.createElement(N,null),c.a.createElement("div",{className:t},a))}),j=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(u.a)(e,2),a=t[0],r=t[1],l=a.name,s=a.email,p=a.password,E=a.error,f=a.success,b=function(e){return function(t){r(Object(i.a)({},a,Object(m.a)({error:!1},e,t.target.value)))}},h=function(e){var t;e.preventDefault(),r(Object(i.a)({},a,{error:!1})),(t={name:l,email:s,password:p},fetch("".concat(d,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).catch(function(e){console.log(e)})).then(function(e){e.error?r(Object(i.a)({},a,{error:e.error,success:!1})):r(Object(i.a)({},a,{name:"",email:"",password:"",error:"",success:!0}))})};return c.a.createElement(y,{className:"container-create col-md-8 offset-md-2"},c.a.createElement("div",{className:"table-wrapper"},c.a.createElement("div",{className:"text-success",style:{display:f?"":"none"}},"New account has been created! ",c.a.createElement(o.b,{to:"/signin"},"Sign in")," to continue."),c.a.createElement("div",{className:"alert alert-danger",style:{display:E?"":"none"}},E),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"username"),c.a.createElement("input",{onChange:b("name"),type:"text",className:"form-control",value:l})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"email "),c.a.createElement("span",null,c.a.createElement("i",null," Must be valid email address containing '@'")),c.a.createElement("input",{onChange:b("email"),type:"email",className:"form-control",value:s})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"password "),c.a.createElement("span",null,c.a.createElement("i",null," Must be min. 6 characters long and include one number and/or symbol ( '!@3$%^&*()'' )")),c.a.createElement("input",{onChange:b("password"),type:"password",className:"form-control",value:p})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{onClick:h,className:"btn btn-add text-uppercase"},"submit"))))},O=function(){var e=Object(n.useState)({email:"glerbs@theflerbs.com",password:"yyyyy1",error:"",loading:!1,redirectToReferrer:!1}),t=Object(u.a)(e,2),a=t[0],r=t[1],l=a.email,o=a.password,p=a.error,f=a.loading,b=a.redirectToReferrer,h=E().user,v=function(e){return function(t){r(Object(i.a)({},a,Object(m.a)({error:!1},e,t.target.value)))}},g=function(e){var t;e.preventDefault(),r(Object(i.a)({},a,{error:!1,loading:!0})),(t={email:l,password:o},fetch("".concat(d,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).catch(function(e){console.log(e)})).then(function(e){e.error?r(Object(i.a)({},a,{error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,function(){r(Object(i.a)({},a,{redirectToReferrer:!0}))})})};return c.a.createElement(y,{className:"container-create"},c.a.createElement("div",{className:"table-wrapper"},f&&c.a.createElement("div",{className:"text-loading"},c.a.createElement("h2",null,"Loading...")),c.a.createElement("div",{className:"alert border rounded-0",style:{display:p?"":"none"}},c.a.createElement("i",{class:"fas fa-exclamation-triangle"})," ",p),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"email"),c.a.createElement("input",{onChange:v("email"),type:"email",className:"form-control border rounded-0",value:l})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"password"),c.a.createElement("input",{onChange:v("password"),type:"password",className:"form-control border rounded-0",value:o})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{onClick:g,className:"btn btn-add text-uppercase"},"submit")),b?h&&1===h.role?c.a.createElement(s.a,{to:"/admin/dashboard"}):c.a.createElement(s.a,{to:"/user/dashboard"}):E()?c.a.createElement(s.a,{to:"/"}):void 0))},x=a(13),w=a.n(x),k=function(){var e=Object(n.useState)(0),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),o=Object(u.a)(l,2),s=o[0],m=o[1];return c.a.createElement(w.a,{activeIndex:a,direction:s,onSelect:function(e,t){r(e),m(t.direction)}},c.a.createElement(w.a.Item,null,c.a.createElement("img",{className:"d-block mx-auto",src:"https://source.unsplash.com/random/1602x600",alt:"First slide",position:"relative","min-width":"100%",height:"600","object-fit":"cover"}),c.a.createElement(w.a.Caption,null,c.a.createElement("h3",null,"PRE-FALL '19 COLLECTION"),c.a.createElement("h6",null,"Nulla vitae elit libero, a pharetra augue mollis interdum."))),c.a.createElement(w.a.Item,null,c.a.createElement("img",{className:"d-block mx-auto",src:"https://source.unsplash.com/random/1600x600",alt:"Third slide",position:"relative","min-width":"100%","max-width":"none",height:"600","object-fit":"cover"}),c.a.createElement(w.a.Caption,null,c.a.createElement("h3",null,"SUMMER SALE"),c.a.createElement("h6",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit."))),c.a.createElement(w.a.Item,null,c.a.createElement("img",{className:"d-block mx-auto",src:"https://source.unsplash.com/random/1601x600",alt:"Third slide",position:"relative","min-width":"100%","max-width":"none",height:"600","object-fit":"cover"}),c.a.createElement(w.a.Caption,null,c.a.createElement("h3",null,"SHOP NEW ARRIVALS"),c.a.createElement("h6",null,"Praesent commodo cursus magna, vel scelerisque nisl consectetur."))))},S=function(e){var t=e.className,a=e.children;return c.a.createElement("div",{className:"splash"},c.a.createElement("div",{className:"carousel-container"},c.a.createElement(k,null)),c.a.createElement(N,null),c.a.createElement("div",{className:"homepage-container"},c.a.createElement("div",{className:t},a)))},C=a(18),T=a.n(C),_=function(e){return fetch("".concat(d,"/products?sortBy=").concat(e,"&order=desc&limit=8"),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},A=function(e,t){var a={limit:t,skip:e,filters:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}};return fetch("".concat(d,"/products/by/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},I=function(e,t){return fetch("".concat(d,"/favorites/by/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},P=function(e,t,a){return fetch("".concat(d,"/favorites/add/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},B=function(e,t,a){return fetch("".concat(d,"/favorites/remove/").concat(a),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},D=function(e){var t=e.item,a=e.url,r=Object(n.useState)(!1),l=Object(u.a)(r,2),s=l[0],m=l[1],i=E()&&E().user._id,p=E()&&E().token;Object(n.useEffect)(function(){!function(e,a){I(e,a).then(function(e){if(e.error)console.log(e.error);else{for(var a=0;a<e.length;a++){if(e[a]._id===t._id)return void m(!0);m(!1)}f(e)}})}(i,p)},[t._id]);var f=function(e){return e?c.a.createElement(o.b,{to:"/user/favorites"},c.a.createElement("i",{className:"fas fa-heart"})):c.a.createElement(o.b,{to:"/user/favorites"},c.a.createElement("i",{className:"far fa-heart"}))};return c.a.createElement("div",{className:"product-img"},c.a.createElement("img",{src:"".concat(d,"/").concat(a,"/photo/").concat(t._id),alt:t.name,className:"mb-3",style:{maxHeight:"100%",maxWidth:"100%"}}),c.a.createElement("div",{className:"top-right"},E()?c.a.createElement("div",null,f(s)):c.a.createElement(o.b,{to:"/signin"},c.a.createElement("i",{className:"far fa-heart"}))))},J=function(e){var t=e.product,a=Object(n.useState)(!1),r=Object(u.a)(a,2),l=r[0],m=(r[1],Object(n.useState)(t.count)),i=Object(u.a)(m,2);i[0],i[1];return c.a.createElement("div",{className:"card-group"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-body"},function(e){if(e)return c.a.createElement(s.a,{to:"/cart"})}(l),c.a.createElement(o.b,{to:"/product/".concat(t._id)},c.a.createElement(D,{item:t,url:"product"})),c.a.createElement("div",{className:"black-5 text-uppercase"},c.a.createElement(o.b,{to:"/product/".concat(t._id)},t.name)),c.a.createElement("p",{className:"lead"},c.a.createElement(o.b,{to:"/product/".concat(t._id)},t.description.substring(0,50),"..."),c.a.createElement("br",null),"$",t.price))))},z=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)([]),o=Object(u.a)(l,2),s=o[0],m=o[1],i=Object(n.useState)(!1),d=Object(u.a)(i,2),p=(d[0],d[1]);return Object(n.useEffect)(function(){_("createdAt").then(function(e){e.error?p(e.error):m(e)}),_("sold").then(function(e){e.error?p(e.error):r(e)})},[]),c.a.createElement(S,{title:"Home Page",description:"Shopit E-commerce App",className:"homepage-container col-8"},c.a.createElement("h2",{className:"menu-header text-uppercase mb-3"},"new arrivals",c.a.createElement("hr",null)),c.a.createElement("div",{className:"row"},s.map(function(e,t){return c.a.createElement("div",{key:t,className:"col-3 mb-3"},c.a.createElement(J,{product:e}))})),c.a.createElement("h2",{className:"menu-header text-uppercase mb-3"},"best sellers",c.a.createElement("hr",null)),c.a.createElement("div",{className:"row"},a.map(function(e,t){return c.a.createElement("div",{key:t,className:"col-3 mb-3"},c.a.createElement(J,{product:e}))})))},R=a(16),G=function(e){var t=e.categories,a=e.handleFilters,r=Object(n.useState)([]),l=Object(u.a)(r,2),o=l[0],s=l[1],m=function(e){return function(){var t=o.indexOf(e),n=Object(R.a)(o);-1===t?n.push(e):n.splice(t,1),s(n),a(n)}};return t.map(function(e,t){return c.a.createElement("li",{key:t,className:"list-unstyled"},c.a.createElement("input",{onChange:m(e._id),value:o.indexOf(-1===e._id),type:"checkbox",className:"form-check-input"}),c.a.createElement("label",{className:"form-check-label"},e.name))})},q=function(e){var t=e.prices,a=e.handleFilters,r=Object(n.useState)(0),l=Object(u.a)(r,2),o=(l[0],l[1]),s=function(e){a(e.target.value),o(e.target.value)};return t.map(function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("input",{onChange:s,value:"".concat(e._id),name:e,type:"radio",className:"mr-2 ml-4"}),c.a.createElement("label",{className:"form-check-label"},e.name))})},$=[{_id:0,name:"any",array:[]},{_id:1,name:"$0 to $349",array:[0,349]},{_id:2,name:"$350 to $499",array:[350,499]},{_id:3,name:"$501 to $999",array:[501,999]},{_id:4,name:"$1000 to $4999",array:[1e3,4999]},{_id:5,name:"$5000 and above",array:[5e3,3e4]}],L=function(){var e=Object(n.useState)({filters:{category:[],price:[]}}),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)([]),o=Object(u.a)(l,2),s=o[0],m=o[1],p=Object(n.useState)(!1),E=Object(u.a)(p,2),f=(E[0],E[1]),b=Object(n.useState)(9),h=Object(u.a)(b,2),v=h[0],g=(h[1],Object(n.useState)(0)),N=Object(u.a)(g,2),j=N[0],O=N[1],x=Object(n.useState)(0),w=Object(u.a)(x,2),k=w[0],S=w[1],C=Object(n.useState)([]),T=Object(u.a)(C,2),_=T[0],I=T[1],P=function(){fetch("".concat(d,"/categories"),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)}).then(function(e){e.error?f(e.error):m(e)})},B=function(e){A(j,v,e).then(function(e){e.error?f(e.error):(I(e.data),S(e.size),O(0))})},D=function(){var e=j+v;A(e,v,a.filters).then(function(t){t.error?f(t.error):(I([].concat(Object(R.a)(_),Object(R.a)(t.data))),S(t.size),O(e))})};Object(n.useEffect)(function(){P(),B(j,a.filters)},[]);var z=function(e,t){console.log("SHOP",e,t);var n=Object(i.a)({},a);if(n.filters[t]=e,"price"==t){var c=L(e);n.filters[t]=c}B(a.filters),r(n)},L=function(e){var t=$,a=[];for(var n in t)t[n]._id===parseInt(e)&&(a=t[n].array);return a};return c.a.createElement(y,{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-4"},c.a.createElement("h4",null,"FILTER BY CATEGORY"),c.a.createElement("ul",null,c.a.createElement(G,{categories:s,handleFilters:function(e){return z(e,"category")}})),c.a.createElement("h4",null,"FILTER BY PRICE RANGE"),c.a.createElement("div",null,c.a.createElement(q,{prices:$,handleFilters:function(e){return z(e,"price")}}))),c.a.createElement("div",{className:"col-8"},c.a.createElement("h2",{className:"mb-3 text-uppercase"},"products"),c.a.createElement("div",{className:"row"},_.map(function(e,t){return c.a.createElement("div",{key:t,className:"col-4 mb-3"},c.a.createElement(J,{key:t,product:e}))})),c.a.createElement("hr",null),k>0&&k>=v&&c.a.createElement("div",{className:"mb-5 text-uppercase",onClick:D},c.a.createElement("h5",null,"load more")))))},U=a(19),M=function(e){var t=e.component,a=Object(U.a)(e,["component"]);return c.a.createElement(s.b,Object.assign({},a,{render:function(e){return E()?c.a.createElement(t,e):c.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},F=function(e,t){var a=e.item,r=e.url,l=Object(n.useState)(!1),o=Object(u.a)(l,2);o[0],o[1];return c.a.createElement("div",{className:"product-img-thumb"},c.a.createElement("img",{src:"".concat(d,"/").concat(r,"/photo/").concat(a._id),alt:a.name,className:"mb-3",style:{maxHeight:"180px"}}))},Y=a(11),H=a.n(Y),V=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],l=E().user,s=l._id,m=l.name,i=l.email,p=l.role,f=E().token,b=function(e,t){(function(e,t){return fetch("".concat(d,"/orders/by/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(e,t).then(function(e){e.error?console.log(e.error):r(e)})};Object(n.useEffect)(function(){b(s,f)},[]);return c.a.createElement(y,{className:"container"},c.a.createElement("div",{className:"container-cart"},c.a.createElement("h2",{className:"mb-4 text-uppercase"},"welcome back, ".concat(m,"!"),c.a.createElement("hr",null)),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"},c.a.createElement("div",{className:"card"},c.a.createElement("h1",{className:"card-header"},"My Links"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item black-5 text-uppercase"},c.a.createElement(o.b,{to:"/cart"},"my cart")),c.a.createElement("li",{className:"list-group-item black-5 text-uppercase"},c.a.createElement(o.b,{to:"/user/favorites"},"my favorites ",c.a.createElement("i",{className:"fas fa-heart",style:{fontSize:"12px"}}))),c.a.createElement("li",{className:"list-group-item black-5 text-uppercase"},c.a.createElement(o.b,{to:"/profile/".concat(s)},"update profile"))))),c.a.createElement("div",{className:"col-9"},c.a.createElement("div",{className:"card mb-2"},c.a.createElement("h1",{className:"card-header"},"Account Information"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},c.a.createElement("h5",{className:"text-uppercase mb-0"},"Name:"),m),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("h5",{className:"text-uppercase mb-0"},"Email:"),i),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("h5",{className:"text-uppercase mb-0"},"Role:"),1===p?"admin":"user"))),function(e){return c.a.createElement("div",{className:"card mb-5"},c.a.createElement("h1",{className:"card-header"},"Past Purchases"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},e.map(function(e,t){return c.a.createElement("div",null,c.a.createElement("h2",{className:"mb-0"},H()(e.createdAt).format("L")," - Order ID: ",e._id),c.a.createElement("hr",null),c.a.createElement("div",{className:"black-6 mb-0 text-uppercase"},"Order Status: ",e.status),c.a.createElement("div",{className:"black-6 text-uppercase"},"Shipping To: ",e.address),c.a.createElement("div",{className:"black-6 text-uppercase mb-4"},"Total: $",e.amount),e.products.map(function(t,a){return c.a.createElement("div",{className:"row m-0"},c.a.createElement("div",{className:"col-2 px-1 "},c.a.createElement(o.b,{to:"/product/".concat(t._id)},c.a.createElement(F,{item:t,url:"product",style:{height:"50px"}}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{key:a},c.a.createElement("div",{className:"ml-2"},c.a.createElement("i",null,"(Item ",a+1," of ",e.products.length,")")),c.a.createElement("br",null),c.a.createElement("div",{className:"black-6 text-uppercase ml-2"},"Item Name:"),c.a.createElement("div",{className:"ml-4"},t.name),c.a.createElement("div",{className:"black-6 text-uppercase ml-2"},"Unit Price:"),c.a.createElement("div",{className:"ml-4"},"$",t.price),c.a.createElement("div",{className:"black-6 text-uppercase ml-2"},"Quantity:"),c.a.createElement("div",{className:"ml-4 mb-4"},t.count),c.a.createElement("br",null))))}))}))))}(a)))))},Q=function(e){var t=e.component,a=Object(U.a)(e,["component"]);return c.a.createElement(s.b,Object.assign({},a,{render:function(e){return E()&&1===E().user.role?c.a.createElement(t,e):c.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},W=function(){var e=E().user,t=e._id,a=e.name,n=e.email,r=e.role;return c.a.createElement(y,{className:"container"},c.a.createElement("div",{className:"container-create"},c.a.createElement("h2",{className:"mb-4 text-uppercase"},"welcome back, ".concat(a,"!"),c.a.createElement("hr",null)),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"},c.a.createElement("div",{className:"card"},c.a.createElement("h1",{className:"card-header"},"My Links"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item black-5 text-uppercase"},c.a.createElement(o.b,{to:"/create/category"},"create new category")),c.a.createElement("li",{className:"list-group-item black-5 text-uppercase"},c.a.createElement(o.b,{to:"/create/product"},"upload new item")),c.a.createElement("li",{className:"list-group-item black-5 text-uppercase"},c.a.createElement(o.b,{to:"/admin/orders"},"manage orders")),c.a.createElement("li",{className:"list-group-item black-5 text-uppercase"},c.a.createElement(o.b,{to:"/admin/products"},"manage items")))),c.a.createElement("hr",null),c.a.createElement("br",null),c.a.createElement("h2",{className:"text-uppercase"},c.a.createElement(o.b,{to:"/profile/".concat(t)},"update profile")),c.a.createElement("br",null),c.a.createElement("hr",null),c.a.createElement("br",null),c.a.createElement("h2",{className:"text-uppercase"},c.a.createElement(o.b,{onClick:function(){return p(function(){})}},"switch accounts")),c.a.createElement("br",null),c.a.createElement("hr",null),c.a.createElement("br",null)),c.a.createElement("div",{className:"col-9"},c.a.createElement("div",{className:"card-dashboard mb-2"},c.a.createElement("h1",{className:"card-header"},"Account Information"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},c.a.createElement("h5",{className:"text-uppercase"},"Name:")," ",a),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("h5",{className:"text-uppercase"},"Email:")," ",n),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("h5",{className:"text-uppercase"},"Role:")," ",1===r?"admin":"user")))))))},K=function(){return fetch("".concat(d,"/categories"),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},X=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],i=s[1],p=Object(n.useState)(!1),f=Object(u.a)(p,2),b=f[0],h=f[1],v=E(),g=v.user,N=v.token,j=function(e){i(""),r(e.target.value)},O=function(e){e.preventDefault(),i(""),h(!1),function(e,t,a){return fetch("".concat(d,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then(function(e){return e.json()}).catch(function(e){console.log(e)})}(g._id,N,{name:a}).then(function(e){e.error?i(!0):(i(""),h(!0))})};return c.a.createElement(y,{title:"add a new category",className:"container-create"},c.a.createElement("div",{class:"table-wrapper"},c.a.createElement("div",{class:"table-title"},c.a.createElement("div",{class:"row"},c.a.createElement("div",{class:"col-sm-8 text-uppercase"},c.a.createElement("h2",null,"add category")))),function(){if(b)return c.a.createElement("h3",{className:"text-success"},a," has been successfully created")}(),function(){if(m)return c.a.createElement("h3",{className:"text-danger"},c.a.createElement("i",{class:"fas fa-exclamation-triangle"})," ",a," already exists")}(),c.a.createElement("form",{onSubmit:O},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"new category name"),c.a.createElement("input",{type:"text",className:"form-control border rounded-0",onChange:j,value:a,autoFocus:!0,required:!0})),c.a.createElement("button",{className:"btn btn-add text-uppercase"},"create category")),c.a.createElement("div",{className:"black-5 text-uppercase mt-5"},c.a.createElement(o.b,{to:"/admin/dashboard"},"go back to dashboard"))))},Z=function(){var e=E(),t=e.user,a=e.token,r=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:""}),l=Object(u.a)(r,2),s=l[0],p=l[1],f=s.name,b=s.description,h=s.price,v=s.categories,g=(s.category,s.shipping,s.quantity),N=s.loading,j=s.error,O=s.createdProduct,x=(s.redirectToProfile,s.formData);Object(n.useEffect)(function(){K().then(function(e){e.error?p(Object(i.a)({},s,{error:e.error})):p(Object(i.a)({},s,{categories:e,formData:new FormData}))})},[]);var w=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;x.set(e,a),p(Object(i.a)({},s,Object(m.a)({},e,a)))}},k=function(e){e.preventDefault(),p(Object(i.a)({},s,{error:"",loading:!0})),function(e,t,a){return fetch("".concat(d,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then(function(e){return e.json()}).catch(function(e){console.log(e)})}(t._id,a,x).then(function(e){e.error?p(Object(i.a)({},s,{error:e.error})):p(Object(i.a)({},s,{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,createdProduct:e.name}))})};return c.a.createElement(y,{title:"add a new product",className:"container-create"},c.a.createElement("div",{class:"table-wrapper"},c.a.createElement("div",{class:"table-title"},c.a.createElement("div",{class:"row"},c.a.createElement("div",{class:"col-sm-8 text-uppercase"},c.a.createElement("h2",null,"add new item")))),N&&c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("h2",null,"loading...")),c.a.createElement("div",{className:"text-success",style:{display:O?"":"none"}},c.a.createElement("h2",null,"".concat(O)," has been successfully uploaded.")),c.a.createElement("div",{className:"alert alert-danger",style:{display:j?"":"none"}},c.a.createElement("i",{class:"fas fa-exclamation-triangle"})," ",j),c.a.createElement("form",{className:"mb-3 black-5 text-uppercase",onSubmit:k},c.a.createElement("h4",null,"item photo"),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"btn btn-outline-primary"},c.a.createElement("input",{onChange:w("photo"),type:"file",name:"photo",accept:"image/*"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"item name"),c.a.createElement("input",{onChange:w("name"),type:"text",className:"form-control border rounded-0",value:f})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"item description"),c.a.createElement("input",{onChange:w("description"),className:"form-control border rounded-0",value:b})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"item price"),c.a.createElement("input",{onChange:w("price"),type:"number",className:"form-control border rounded-0",value:h})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"item category"),c.a.createElement("select",{onChange:w("category"),className:"form-control border rounded-0"},c.a.createElement("option",null,"Select Category"),v&&v.map(function(e,t){return c.a.createElement("option",{key:t,value:e._id},e.name)}))),c.a.createElement("div",{className:"form-group rounded-0"},c.a.createElement("label",{className:"black-5 text-uppercase"},"shipping"),c.a.createElement("select",{onChange:w("shipping"),className:"form-control border rounded-0"},c.a.createElement("option",null,"Select Shipping Option"),c.a.createElement("option",{value:"0"},"Pick-up only"),c.a.createElement("option",{value:"1"},"Can be shipped"))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"item quantity"),c.a.createElement("input",{onChange:w("quantity"),type:"number",className:"form-control border rounded-0",value:g})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{className:"btn btn-add text-uppercase"},"upload item")),c.a.createElement("div",{className:"mt-5"},c.a.createElement(o.b,{to:"/admin/dashboard",className:"black-5 text-uppercase mt-5"},"go back to dashboard"))))},ee=function(e){var t=e.product,a=e.showViewProductButton,r=void 0===a||a,l=e.showAddToCartButton,m=void 0===l||l,i=e.cartUpdate,d=void 0!==i&&i,p=e.showAddToFavoritesButton,h=void 0===p||p,v=Object(n.useState)(!1),g=Object(u.a)(v,2),N=g[0],y=g[1],j=Object(n.useState)(!1),O=Object(u.a)(j,2),x=O[0],w=O[1],k=Object(n.useState)(t.count),S=Object(u.a)(k,2),C=S[0],T=S[1],_=E()&&E().user._id,A=E()&&E().token;Object(n.useEffect)(function(){!function(e,a){I(e,a).then(function(e){if(console.log(e),e.error)console.log(e.error);else{for(var a=0;a<e.length;a++){if(console.log(e[a]),e[a]._id===t._id)return void w(!0);w(!1)}D(e)}})}(_,A)},[t._id]);var D=function(e){return e?c.a.createElement("i",{className:"fas fa-heart",onClick:function(){return R()}}):c.a.createElement("i",{className:"far fa-heart",onClick:function(){return z()}})},J=function(){f(t,function(){y(!0)})},z=function(){P(_,A,t).then(function(e){e.error?console.log(e.error):w(!0)})},R=function(){B(t,A,_).then(function(e){e.error?console.log(e.error):w(!1)})},G=function(e){return x?c.a.createElement("button",{className:"btn btn-added text-uppercase",onClick:R},"remove from favorites"):e&&c.a.createElement("button",{onClick:z,className:"btn btn-add text-uppercase"},"add to favorites")};return c.a.createElement("div",{className:"details-group"},c.a.createElement("div",{className:"details"},c.a.createElement("div",{className:"details-body"},function(e){if(e&&J)return c.a.createElement(s.a,{to:"/cart"})}(N),c.a.createElement("div",{className:"black-4 text-uppercase"},t.name," ",D(x)),c.a.createElement("p",{className:"details-lead"},t.description,c.a.createElement("br",null),c.a.createElement("br",null),"$",t.price),c.a.createElement("br",null),c.a.createElement("br",null),t.quantity>0?c.a.createElement("span",{className:"badge badge-primary badge-pill"},"in stock"):c.a.createElement("span",{className:"badge badge-primary badge-pill"},"currently out of stock"),c.a.createElement("br",null),c.a.createElement("br",null),function(e){return e&&c.a.createElement(o.b,{to:"/product/".concat(t._id),className:"mr-2"},c.a.createElement("button",{className:"btn btn-outline-primary mt-2 mb-2"},"view product"))}(r),function(e){return e&&c.a.createElement("button",{onClick:J,className:"btn btn-add text-uppercase mb-3"},"add to cart")}(m),E()?c.a.createElement("div",null,G(h)):c.a.createElement(o.b,{to:"/signin"},c.a.createElement("button",{className:"btn btn-add text-uppercase"},"sign in to see ",c.a.createElement("i",{className:"fas fa-heart",style:{fontSize:"15px"}}),"'s")),function(e){return e&&c.a.createElement("div",null,c.a.createElement("div",{className:"input-group mb-3"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text"},"adjust quantity")),c.a.createElement("input",{type:"number",className:"form-control",value:C,onChange:(a=t._id,function(e){T(e.target.value<1?1:e.target.value),e.target.value>=1&&b(a,e.target.value)})})));var a}(d),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("hr",null),c.a.createElement("div",{className:"in-category"},"In: ",t.category&&t.category.name),c.a.createElement("div",{className:"in-category mb-2"},"Uploaded ",H()(t.createdAt).fromNow()))))},te=function(e){var t=e.item,a=e.url;return c.a.createElement("div",{className:"product-img"},c.a.createElement("img",{src:"".concat(d,"/").concat(a,"/photo/").concat(t._id),alt:t.name,className:"mb-3",style:{maxHeight:"100%",maxWidth:"100%"}}))},ae=function(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)([]),s=Object(u.a)(o,2),m=s[0],i=s[1],p=Object(n.useState)(!1),E=Object(u.a)(p,2),f=(E[0],E[1]),b=function(e){(function(e){return fetch("".concat(d,"/product/").concat(e),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(e).then(function(e){var t;e.error?f(e.error):(l(e),(t=e._id,fetch("".concat(d,"/products/related/").concat(t),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})).then(function(e){e.error?f(e.error):i(e)}))})};return Object(n.useEffect)(function(){var t=e.match.params.productId;b(t)},[e]),c.a.createElement(y,{className:"container"},c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-8"},c.a.createElement("div",{className:"details-img"},c.a.createElement(te,{item:r,url:"product"}))),c.a.createElement("div",{className:"col-4"},r&&r.description&&c.a.createElement(ee,{product:r,showViewProductButton:!1})),c.a.createElement("div",{className:"related"},c.a.createElement("h2",{className:"mb-3"},"RECOMMENDED"),c.a.createElement("div",{className:"row"},m.map(function(e,t){return c.a.createElement("div",{className:"col-3"},c.a.createElement(J,{key:t,product:e}))}).splice(0,4))),c.a.createElement("br",null),c.a.createElement("br",null)))},ne=function(e){var t=e.product,a=(e.showViewProductButton,e.showAddToCartButton,e.cartUpdate),r=void 0!==a&&a,l=(e.showRemoveProductButton,e.showMoveProductButton,Object(n.useState)(!1)),m=Object(u.a)(l,2),i=(m[0],m[1],Object(n.useState)(!1)),d=Object(u.a)(i,2),p=d[0],f=d[1],v=Object(n.useState)(t.count),g=Object(u.a)(v,2),N=g[0],y=g[1],j=E(),O=j.user,x=j.token,w=function(e){P(O._id,x,e).then(function(t){t.error?(f(!0),console.log(t.error)):h(e._id)})};return c.a.createElement("div",{className:"details-group"},function(e){if(e)return c.a.createElement(s.a,{to:"/user/favorites"})}(p),c.a.createElement("div",{className:"details"},c.a.createElement("div",{className:"details-body",style:{width:"400px"}},c.a.createElement("div",{className:"black-5 text-uppercase"},c.a.createElement(o.b,{to:"/product/".concat(t._id)},t.name)),c.a.createElement("div",{className:""},"$",t.price),c.a.createElement("div",null,function(e){return e&&c.a.createElement("div",{style:{width:"125px",float:"right"}},c.a.createElement("div",{className:"input-group pt-5"},c.a.createElement("div",{className:"input-group-prepend",style:{width:"50%"}},c.a.createElement("span",{className:"input-group-text bg-transparent border-right-0 border rounded-0 text-uppercase"},"QTY")),c.a.createElement("input",{type:"number",className:"form-control py-2 border rounded-0",value:N,onChange:(a=t._id,function(e){y(e.target.value<1?1:e.target.value),e.target.value>=1&&b(a,e.target.value)})})));var a}(r)),c.a.createElement("div",{className:"checkout-buttons-container"},c.a.createElement("div",{className:"col-12"},c.a.createElement("div",{className:"row"},c.a.createElement("button",{onClick:function(){return w(t)},className:"btn btn-add text-uppercase",style:{width:"130px"}},"move to ",c.a.createElement("i",{className:"fas fa-heart",style:{fontSize:"14px"}})),c.a.createElement("button",{onClick:function(){return h(t._id)},className:"btn btn-add text-uppercase ml-2",style:{width:"130px"}},"remove")))),c.a.createElement("br",null))))},ce=a(41),re=a.n(ce),le=function(e){var t=e.products,a=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),r=Object(u.a)(a,2),l=r[0],s=r[1],m=E()&&E().user._id,p=E()&&E().token,f=function(e,t){(function(e,t){return fetch("".concat(d,"/braintree/getToken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(e,t).then(function(e){e.error?s(Object(i.a)({},e,{error:e.error})):s({clientToken:e.clientToken})})};Object(n.useEffect)(function(){f(m,p)},[]);var b,h,v=function(e){s(Object(i.a)({},l,{address:e.target.value}))},g=function(){return t.reduce(function(e,t){return e+t.count*t.price},0)},N=l.address,y=function(){s({loading:!0}),l.instance.requestPaymentMethod().then(function(e){var a={paymentMethodNonce:e.nonce,amount:g()};(function(e,t,a){return fetch("".concat(d,"/braintree/payment/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(m,p,a).then(function(e){console.log(e);var a={products:t,transaction_id:e.transaction.id,amount:e.transaction.amount,address:N};(function(e,t,a){return fetch("".concat(d,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:a})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(m,p,a).then(function(e){var t;t=function(){console.log("payment success and cart emptied"),s({loading:!1,success:!0})},"undefined"!==typeof window&&(localStorage.removeItem("cart"),t())}).catch(function(e){console.log(e),s({loading:!1})})}).catch(function(e){console.log(e),s({loading:!1})})}).catch(function(e){s(Object(i.a)({},l,{error:e.message}))})},j=function(){return c.a.createElement("div",{onBlur:function(){return s(Object(i.a)({},l,{error:""}))}},null!==l.clientToken&&t.length>0?c.a.createElement("div",null,c.a.createElement("div",{className:"form-group mb-3"},c.a.createElement("label",{className:"black-5 text-uppercase"},"Shipping Address:"),c.a.createElement("textarea",{onChange:v,className:"form-control border rounded-0",value:l.address,placeholder:"Enter your shipping address"})),c.a.createElement("div",{className:"payment-module"},c.a.createElement(re.a,{options:{authorization:l.clientToken,paypal:{flow:"vault"}},onInstance:function(e){return l.instance=e}}),c.a.createElement("button",{onClick:y,className:"btn btn-purchase text-uppercase"},"Complete Purchase"))):null)};return c.a.createElement("div",null,c.a.createElement("h2",null,"ESTIMATED TOTAL: $",g()),c.a.createElement("br",null),c.a.createElement("br",null),l.loading&&c.a.createElement("h2",{className:"text-lading"},"loading..."),(h=l.success,c.a.createElement("div",{className:"text-loading",style:{display:h?"":"none"}},"Your payment was successful. Thanks for your order!")),(b=l.error,c.a.createElement("div",{className:"alert alert-danger border rounded-0",style:{display:b?"":"none"}},b)),E()?c.a.createElement("div",null,j()):c.a.createElement(o.b,{to:"/signin"},c.a.createElement("button",{className:"btn btn-add text-uppercase"},"sign in to complete checkout")))},oe=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)(function(){r("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])},[a]);return c.a.createElement(y,{title:"shopping cart",description:"manage your items",className:"container"},c.a.createElement("div",{className:"container-cart"},c.a.createElement("h2",{className:"mb-4"},"YOUR CART",c.a.createElement("hr",null)),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-6"},a.length>0?function(e){return c.a.createElement("div",null,"You have ","".concat(e.length)," ","".concat(1===e.length?"item":"items")," in your cart.",c.a.createElement("br",null)," ",c.a.createElement("h4",null,c.a.createElement(o.b,{to:"/shop"},"CONTINUE SHOPPING")),c.a.createElement("hr",null),e.map(function(e,t){return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"},c.a.createElement(o.b,{to:"/product/".concat(e._id)},c.a.createElement(F,{item:e,url:"product"}))),c.a.createElement(ne,{key:t,product:e,showAddToCartButton:!1,cartUpdate:!0,showRemoveProductButton:!0}))}),c.a.createElement("hr",null))}(a):c.a.createElement("div",null,"Your cart is currently empty.",c.a.createElement("br",null)," ",c.a.createElement("h4",null,c.a.createElement(o.b,{to:"/shop"},"CONTINUE SHOPPING")))),c.a.createElement("div",{className:"col-6"},c.a.createElement(le,{products:a})))))},se=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)([]),s=Object(u.a)(l,2),m=s[0],i=s[1],p=E(),f=p.user,b=p.token,h=function(){(function(e,t){return fetch("".concat(d,"/order/list/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(f._id,b).then(function(e){e.error?console.log(e.error):r(e)})},v=function(){(function(e,t){return fetch("".concat(d,"/order/status-values/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(f._id,b).then(function(e){e.error?console.log(e.error):i(e)})};Object(n.useEffect)(function(){h(),v()},[]);var g=function(e,t){return c.a.createElement("div",null,c.a.createElement("span",{className:"text-uppercase ",style:{padding:"20px",width:"580px"}},e,":"),c.a.createElement("span",{style:{"font-family":"ProximaNova-Regular"}},t))},N=function(e,t){(function(e,t,a,n){return fetch("".concat(d,"/order/").concat(a,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:n,orderId:a})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(f._id,b,t,e.target.value).then(function(e){e.error?console.log("status update failed"):h()})};return c.a.createElement(y,null,c.a.createElement("div",{className:"container-create"},c.a.createElement("div",{class:"table-wrapper"},c.a.createElement("div",{class:"table-title"},c.a.createElement("div",{class:"row"},c.a.createElement("div",{class:"col-sm-8 text-uppercase"},c.a.createElement("h2",null,"manage orders")),c.a.createElement("div",{class:"col-sm-4"}))),c.a.createElement("table",{class:"table table-bordered"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,a.length>1?c.a.createElement("div",{className:"black-5 text-uppercase"},a.length," orders total"):1===a.length?c.a.createElement("div",{className:"black-5 text-uppercase"},"1 order total"):c.a.createElement("div",{className:"black-5 text-uppercase"},"no orders to display")))),c.a.createElement("tbody",null,c.a.createElement("div",{className:"form-group black-5 mt-3"},a.map(function(e,t){return c.a.createElement("div",{className:"black-5 ml-3",key:t},c.a.createElement("span",{key:t,className:"text-uppercase"},"order ID: ",e._id),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},function(e){return c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"black-5 mb-2 text-uppercase"},"Status: ",e.status),c.a.createElement("select",{className:"form-control border rounded-0",onChange:function(t){return N(t,e._id)},style:{width:"580px"}},">",c.a.createElement("option",null,"Update Status"),m.map(function(e,t){return c.a.createElement("option",{key:t,value:e},e)})))}(e)),c.a.createElement("li",{className:"list-group-item py-0"},c.a.createElement("div",{className:"mb-4",style:{padding:"20px",border:"1px solid gray",width:"580px"}},c.a.createElement("div",{className:"black-5 text-uppercase"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("div",{className:""},"order date: ")),c.a.createElement("input",{type:"text",value:"".concat(H()(e.createdAt).format("L")," (").concat(H()(e.createdAt).fromNow(),")"),className:"form-control border rounded-0",readOnly:!0})),c.a.createElement("div",{className:"black-5 text-uppercase"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("div",{className:""},"amount: ")),c.a.createElement("input",{type:"text",value:e.amount,className:"form-control border rounded-0",readOnly:!0})),c.a.createElement("div",{className:"black-5 text-uppercase"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("div",{className:""},"shipped to: ")),c.a.createElement("input",{type:"text",value:e.address,className:"form-control border rounded-0",readOnly:!0})),c.a.createElement("div",{className:"black-5 text-uppercase"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("div",{className:""},"total units in order: ")),c.a.createElement("input",{type:"text",value:e.products.length,className:"form-control border rounded-0",readOnly:!0}))))),c.a.createElement("td",null,e.products.map(function(e,t){return c.a.createElement("div",{className:"mb-4",key:t},g("Item name",e.name),g("Unit price","$".concat(e.price)),g("Quantity",e.count))})))})))),c.a.createElement("div",{className:"black-5 text-uppercase mt-5"},c.a.createElement(o.b,{to:"/admin/dashboard"},"go back to dashboard")),c.a.createElement("br",null))))},me=function(e){var t=e.match,a=Object(n.useState)({name:"",email:"",password:"",error:!1,success:!1}),r=Object(u.a)(a,2),l=r[0],p=r[1],f=E().token,b=l.name,h=l.email,v=l.password,g=(l.error,l.success),N=function(e){(function(e,t){return fetch("".concat(d,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(e,f).then(function(e){e.error?p(Object(i.a)({},l,{error:!0})):p(Object(i.a)({},l,{name:e.name,email:e.email}))})};Object(n.useEffect)(function(){N(t.params.userId)},[]);var j=function(e){return function(t){p(Object(i.a)({},l,Object(m.a)({error:!1},e,t.target.value)))}},O=function(e){e.preventDefault(),function(e,t,a){return fetch("".concat(d,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})}(t.params.userId,f,{name:b,email:h,password:v}).then(function(e){e.error?console.log(e.error):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var a=JSON.parse(localStorage.getItem("jwt"));a.user=e,localStorage.setItem("jwt",JSON.stringify(a)),t()}}(e,function(){p(Object(i.a)({},l,{name:e.name,email:e.email,success:!0}))})})};return c.a.createElement(y,{className:"container-create"},c.a.createElement("div",{className:"table-wrapper"},function(e,t,a){return c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"Name"),c.a.createElement("input",{type:"text",onChange:j("name"),className:"form-control border rounded-0",value:e})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"Email"),c.a.createElement("input",{type:"email",onChange:j("email"),className:"form-control border rounded-0",value:t})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"Password"),c.a.createElement("input",{type:"password",onChange:j("password"),className:"form-control border rounded-0",value:a})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{onClick:O,className:"btn btn-add text-uppercase"},"update profile"))}(b,h,v),function(e){if(e)return c.a.createElement(s.a,{to:"/"})}(g),c.a.createElement("div",{className:"mt-5"},E()&&0===E().user.role&&c.a.createElement("div",{className:"black-5 text-uppercase"},c.a.createElement(o.b,{to:"/user/dashboard"},"go back to dashboard")),E()&&1===E().user.role&&c.a.createElement("div",{className:"black-5 text-uppercase"},c.a.createElement(o.b,{to:"/admin/dashboard"},"go back to dashboard")))))},ie=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],l=E(),s=l.user,m=l.token,i=function(){fetch("".concat(d,"/products?limit=undefined"),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)}).then(function(e){e.error?console.log(e.error):r(e)})},p=function(e){(function(e,t,a){return fetch("".concat(d,"/product/").concat(e,"/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(e,s._id,m).then(function(e){e.error?console.log(e.error):i()})};Object(n.useEffect)(function(){i()},[]);return c.a.createElement(y,{title:"Manage Products",description:"perform CRUD on products",className:"container"},c.a.createElement("div",{className:"container-create"},c.a.createElement("div",{class:"table-wrapper"},c.a.createElement("div",{class:"table-title"},c.a.createElement("div",{class:"row"},c.a.createElement("div",{class:"col-sm-8 text-uppercase"},c.a.createElement("h2",null,"manage products")),c.a.createElement("div",{class:"col-sm-4"}))),c.a.createElement("table",{class:"table table-bordered"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,c.a.createElement("div",{className:"black-5 text-uppercase"},a.length," products total")))),c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",{className:"list-group"},a.map(function(e,t){return c.a.createElement("div",{className:"list-group-item py-0"},c.a.createElement("td",{key:t,className:"black-5 text-uppercase"},t+1,". ",e.name),c.a.createElement("td",null,c.a.createElement("a",{class:"edit",title:"Edit","data-toggle":"tooltip"},c.a.createElement(o.b,{to:"/admin/product/update/".concat(e._id)},c.a.createElement("i",{class:"far fa-edit"}))),c.a.createElement("a",{class:"delete",title:"Delete","data-toggle":"tooltip",onClick:function(){return p(e._id)}},c.a.createElement("i",{class:"far fa-trash-alt"}))))}))))),c.a.createElement("div",{className:"black-5 text-uppercase mt-5"},c.a.createElement(o.b,{to:"/admin/dashboard"},"go back to dashboard")),c.a.createElement("br",null))))},ue=function(e){var t=e.match,a=E(),r=a.user,l=a.token,p=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:""}),f=Object(u.a)(p,2),b=f[0],h=f[1],v=b.name,g=b.description,N=b.price,j=b.categories,O=(b.category,b.shipping,b.quantity),x=b.loading,w=b.error,k=b.createdProduct,S=b.redirectToProfile,C=b.formData,T=function(e){(function(e){return fetch("".concat(d,"/product/").concat(e),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})})(e).then(function(e){e.error?h(Object(i.a)({},b,{error:e.error})):(h(Object(i.a)({},b,{name:e.name,description:e.description,price:e.price,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData})),_())})},_=function(){K().then(function(e){e.error?h(Object(i.a)({},b,{error:e.error})):h({categories:e,formData:new FormData})})};Object(n.useEffect)(function(){T(t.params.productId)},[]);var A=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;C.set(e,a),h(Object(i.a)({},b,Object(m.a)({},e,a)))}},I=function(e){e.preventDefault(),h(Object(i.a)({},b,{error:"",loading:!0})),function(e,t,a,n){return fetch("".concat(d,"/product/").concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:n}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})}(t.params.productId,r._id,l,C).then(function(e){e.error?h(Object(i.a)({},b,{error:e.error})):h(Object(i.a)({},b,{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,error:!1,redirectToProfile:!0,createdProduct:e.name}))})};return c.a.createElement(y,{title:"add a new product",description:"welcome back, ".concat(r.name,"! upload a new product"),className:"container-create"},c.a.createElement("div",{class:"table-wrapper"},c.a.createElement("div",{class:"table-title"},c.a.createElement("div",{class:"row"},c.a.createElement("div",{class:"col-sm-8 text-uppercase"},c.a.createElement("h2",null,"update item")))),x&&c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("h2",null,"loading...")),c.a.createElement("div",{className:"text-success",style:{display:k?"":"none"}},c.a.createElement("h2",null,"".concat(k)," has been successfully updated.")),c.a.createElement("div",{className:"alert alert-danger",style:{display:w?"":"none"}},c.a.createElement("i",{class:"fas fa-exclamation-triangle"})," ",w),c.a.createElement("form",{className:"mb-3 black-5 text-uppercase",onSubmit:I},c.a.createElement("h4",null,"upload new photo"),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"btn btn-outline-primary"},c.a.createElement("input",{onChange:A("photo"),type:"file",name:"photo",accept:"image/*"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"new item name"),c.a.createElement("input",{onChange:A("name"),type:"text",className:"form-control border rounded-0",value:v})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"new item description"),c.a.createElement("input",{onChange:A("description"),className:"form-control border rounded-0",value:g})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"new item price"),c.a.createElement("input",{onChange:A("price"),type:"number",className:"form-control border rounded-0",value:N})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"new item category"),c.a.createElement("select",{onChange:A("category"),className:"form-control border rounded-0"},c.a.createElement("option",null,"Select Category"),j&&j.map(function(e,t){return c.a.createElement("option",{key:t,value:e._id},e.name)}))),c.a.createElement("div",{className:"form-group border rounded-0"},c.a.createElement("label",{className:"black-5 text-uppercase"},"shipping"),c.a.createElement("select",{onChange:A("shipping"),className:"form-control border rounded-0"},c.a.createElement("option",null,"Select Shipping Option"),c.a.createElement("option",{value:"0"},"Pick-up only"),c.a.createElement("option",{value:"1"},"Can be shipped"))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"black-5 text-uppercase"},"item quantity"),c.a.createElement("input",{onChange:A("quantity"),type:"number",className:"form-control border rounded-0",value:O})),c.a.createElement("button",{className:"btn btn-add text-uppercase"},"update item")),function(){if(S&&!w)return c.a.createElement(s.a,{to:"/admin/products"})}(),c.a.createElement("div",{className:"mt-5"},c.a.createElement(o.b,{to:"/admin/products",className:"black-5 text-uppercase mt-5"},"go back to manage products")),c.a.createElement("div",null,c.a.createElement(o.b,{to:"/admin/dashboard",className:"black-5 text-uppercase mt-5"},"go back to dashboard"))))},de=function(e){e.search,e.match,e.location;var t=T.a.parse(window.location.search),a=Object(n.useState)({results:[],searched:!1,term:t.search,search:""}),r=Object(u.a)(a,2),l=r[0],o=r[1],s=l.results,m=l.searched,p=l.term,E=Object(n.useState)(8),f=Object(u.a)(E,2),b=f[0],h=(f[1],Object(n.useState)(0)),v=Object(u.a)(h,2),g=v[0],N=v[1];Object(n.useEffect)(function(){j()},[]);var j=function(){p&&function(e){var t=T.a.stringify(e);return console.log("params",e),console.log("query",t),fetch("".concat(d,"/products/search?").concat(t),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})}({search:p||void 0}).then(function(e){e.error?console.log(e.error):o(Object(i.a)({},l,{results:e,searched:!0}))})},O=function(){N(s.length)};return c.a.createElement(y,{title:"shop page",description:"browse through items",className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3 mb-3"}),c.a.createElement("div",{className:"col-8"},c.a.createElement("div",{className:"row"},c.a.createElement("h2",{className:"row text-uppercase mt-3"},"product search")),c.a.createElement("div",{className:"row"}),c.a.createElement("div",{className:"row"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return c.a.createElement("div",null,c.a.createElement("h4",{className:"row text-uppercase mt-3"},function(e,t){return e&&1===t.length?"Your search returned ".concat(t.length," product"):e&&t.length>0?"Your search returned ".concat(t.length," products"):e&&t.length<1?"No products found":void 0}(m,e)),c.a.createElement("div",{className:"row"},e.map(function(e,t){return c.a.createElement("div",{className:"col-4 mb-3"},c.a.createElement(J,{key:t,product:e}))})))}(s)),g>0&&g>=b&&c.a.createElement("div",{className:"mb-5 text-uppercase",onClick:O},c.a.createElement("h5",null,"load more")),c.a.createElement("hr",null))))},pe=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),m=Object(u.a)(l,2),i=m[0],d=m[1],p=E().user._id,b=E().token;Object(n.useEffect)(function(){!function(e,t){I(e,t).then(function(e){e.error?console.log(e.error):r(e)})}(p,b)},[]);var h=function(e){console.log("removing favorite..."),B(e,b,p).then(function(e){e.error?console.log(e.error):(console.log("successfully removed item!"),I(p,b).then(function(e){e.error?console.log(e.error):r(e)}))})},v=function(e){f(e,function(){h(e),d(!0)})};return c.a.createElement(y,{className:"container-create"},c.a.createElement("div",{class:"table-wrapper"},function(e){if(e&&v)return c.a.createElement(s.a,{to:"/cart"})}(i),c.a.createElement("div",{class:"table-title"},c.a.createElement("div",{class:"row"},c.a.createElement("div",{class:"col-sm-8 text-uppercase"},c.a.createElement("h2",null,"my favorites")))),function(e){return c.a.createElement("div",{className:"card mb-2"},c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},c.a.createElement("h2",null,"".concat(e.length)," ","".concat(1===e.length?"ITEM":"ITEMS")," SAVED"),e.map(function(e,t){return c.a.createElement("div",null,c.a.createElement("hr",null),c.a.createElement("div",{className:"row m-0"},c.a.createElement("div",{className:"col-3"},c.a.createElement(o.b,{to:"/product/".concat(e._id)},c.a.createElement(F,{item:e,url:"product"}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{key:t,style:{width:"460px"}},c.a.createElement("div",{className:"black-6 text-uppercase"},c.a.createElement(o.b,{to:"/product/".concat(e._id)},e.name),c.a.createElement("br",null),c.a.createElement("div",{className:"black-6 text-uppercase"},"$",e.price)),c.a.createElement(o.b,{to:"/product/".concat(e._id)},e.description.substring(0,70),"..."),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"row mt-3"},c.a.createElement("div",{className:"col-12"},c.a.createElement("button",{className:"col-5 mr-2 btn btn-add text-uppercase",onClick:function(){return h(e)}},"remove"),c.a.createElement("button",{className:"col-6 btn btn-add text-uppercase",onClick:function(){return v(e)}},"add to cart")))),c.a.createElement("div",null)),c.a.createElement("br",null)))}))))}(a),c.a.createElement("div",{className:"black-5 text-uppercase mt-3"},c.a.createElement("a",{href:"javascript: history.go(-1)"},"go back"))))},Ee=function(){return c.a.createElement(o.a,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",exact:!0,component:z}),c.a.createElement(s.b,{path:"/shop",exact:!0,component:L}),c.a.createElement(s.b,{path:"/search/",exact:!0,component:de}),c.a.createElement(s.b,{path:"/signin",exact:!0,component:O}),c.a.createElement(s.b,{path:"/signup",exact:!0,component:j}),c.a.createElement(M,{path:"/user/dashboard",exact:!0,component:V}),c.a.createElement(Q,{path:"/admin/dashboard",exact:!0,component:W}),c.a.createElement(X,{path:"/create/category",exact:!0,component:X}),c.a.createElement(Z,{path:"/create/product",exact:!0,component:Z}),c.a.createElement(s.b,{path:"/product/:productId",exact:!0,component:ae}),c.a.createElement(s.b,{path:"/cart",exact:!0,component:oe}),c.a.createElement(Q,{path:"/admin/orders",exact:!0,component:se}),c.a.createElement(M,{path:"/profile/:userId",exact:!0,component:me}),c.a.createElement(Q,{path:"/admin/products",exact:!0,component:ie}),c.a.createElement(Q,{path:"/admin/product/update/:productId",exact:!0,component:ue}),c.a.createElement(M,{path:"/user/favorites",exact:!0,component:pe})))};l.a.render(c.a.createElement(Ee,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.ed3d0c68.chunk.js.map